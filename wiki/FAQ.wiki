#summary Frequently asked questions
#labels Featured
#sidebar TOC

This is a list of questions that might be frequently asked.  It will be extended as more questions come to light.

<wiki:toc max_depth="4" />


= Questions =

== I have a question about how to use the software ==

Check the help pages on the wiki (http://code.google.com/p/biodiverse/w/list).  If it is not covered there then please contact the developers, or join the Biodiverse-Users google group and post a question there.  

== Where can I get sample data to experiment with? ==

Sample data are distributed with the software.  Look in the data folder.  The Readme.txt file explains what they represent. 

You can download other geolocated data from a variety of sources, for example [http://data.gbif.org/ GBIF] or [http://www.ersa.edu.au/avh/ Australia's Virtual Herbarium].  There are also many sources for trees, e.g. the [http://tolweb.org/tree/ Tree of Life].


== I have found a bug ==

Please submit bugs via the Issues list at http://code.google.com/p/biodiverse/issues/list

== I would like a new feature to be added to Biodiverse ==

These are also submitted via the issues list.  Just specify the type label as Type-Enhancement (click on the _Type-Defect_ box to open the menu containing this option).  http://code.google.com/p/biodiverse/issues/list

== My species list has been provided as a site by species matrix.  How do I import it? ==

Turn on the checkbox next to _Data are in matrix form?_ when importing.  See [SampleSession#BaseData].

== Can I skip a subset of species when importing data? ==

Yes.  Use an Element Property table for this purpose, specifying one or more exclude and/or include columns.  See [DataStructures#Element_property_tables].

== Results exported to ER-Mapper BIL files do not display properly in !ArcMap ==

You will need to calculate statistics for the image for it to display properly (before displaying it).  This can be done in !ArcCatalog by right clicking on the file and choosing Calculate Statistics, or by using the _Calculate Statistics_ tool in !ArcToolbox.

If you calculate statistics while displaying the image in !ArcMap then it will not work properly.   This is possibly because it does so for only the subset of bands being displayed, and then cannot save the file correctly.  Doing the whole file using the approach above gets around this.

== My ER-Mapper BIL file is offset by half a pixel ==

The ER-Mapper file export is written to work with !ArcMap.  However, !ArcMap seems to use the centre of the registration cell as the location of the registration coordinate.  This results in an offset of 0.5 pixels to the north and west when it is plotted using some other system like Erdas or ER-Mapper.  The solution is to edit the header file and change these two lines:
{{{
RegistrationCellX  = 0
RegistrationCellY  = 0
}}}
to be 
{{{
RegistrationCellX  = 0.5
RegistrationCellY  = 0.5
}}}

The system behaviour is set for !ArcMap purely because we are assuming more people will be using it for display.  If that is not the case then the behaviour can be changed.  With ArcGIS 10 using the GDAL library this problem will hopefully go away and we can set the registration cells to 0.5.

==  Why do my asciigrid or floatgrid files have strange characters like %3A in the names? ==

The operating systems do not normally allow certain characters in filenames, for example colons, quotes or backslashes.  If these characters were used in the filenames then exports of groups to the ascii and floatgrid formats will fail, as the file names cannot use the actual names (the colon is a separator, and quotes are often used to obey CSV rules).  Changing the characters to the URI escaped forms gets around this (see issue #129).  For a list of the characters and their escaped forms, see http://www.december.com/html/spec/esccodes.html 


== I get an Out of memory error ==

In some cases the system will use up all the available memory, following which it will crash.  Specific cases are the randomisations (see issue #5) and when one is using a large !BaseData object (e.g. >100,000 groups and ~60 labels) and tries to save the data set while displaying several outputs.

On most 32-bit operating systems the maximum memory allocated to a process is 2GB. On Linux it is 3GB, and server versions of Windows can be configured for 3GB.  If more than this is needed then the system will crash.  There is also the issue that Perl's memory management system is not perfect, and does not completely free all memory in case it might need it again later.  This particularly affects the randomisations.  Each iteration is assigned a chunk of memory that is not returned to the general pool, and eventually the system runs out of available memory and crashes.

Closing Biodiverse and restarting it will clear any memory no longer needed, but does not solve all cases involving large data sets.  In this case one should close any open tabs in the GUI before exporting or saving, as the memory used for the GUI section is freed and returned properly.  One can also subdivide the analyses and run them separately (i.e. a small number of analyses per duplicate !BaseData).  Randomisations for these duplicates can be reproduced by specifying the same starting seed and parameters.  

If that does not not work then the next solution is to move to a 64 bit system which allows more memory per process.  Make sure Perl and GTK are both 64 bit, as 32 bit implementations still have the 2GB memory limitation on these systems.  Note that the issue will still affect 64 bit systems, but that one can get further before crashing.

An alternate solution, if a 64 bit system is not available, is to subdivide the !BaseData object into tiles before analysis.  This works well for most moving window analyses, but cluster and randomisation analyses will not produce correct results as the groups and labels they use will be restricted to each tile.  One must also ensure the tiles have overlapping boundaries to ensure the moving window analyses have the correct neighbour sets (the degree of overlap depends on the neighbour set used).  Indices that use global statistics, such as the global range used in the endemism indices, also need some care.  Global ranges and global sample counts can be set using an Element Properties table when importing the !BaseData (see [DataStructures#Element_property_tables]).  This can be constructed from the whole data set by calculating the endemism and rarity lists with a spatial condition set to `sp_select_all()`, and then extracted by control clicking on the displayed results to see the lists, from which the values can be copied into a spreadsheet or other program.  (This assumes you can display the results without the crash.   If not then a script is the only way to extract the data).

For the randomisations we have also developed a command line tool that runs the randomisations a small number of iterations at a time and then restarts the process (load_and_randomise_wrapper).  This was released in version 0.14, and documentation are at the LoadAndRandomise page.

== Opening the help system on Linux does not return focus to Biodiverse ==

This seems to be an issue with the command used to open the browser, or possibly the operating system.  The solution is to open the browser outside Biodiverse before accessing the help.