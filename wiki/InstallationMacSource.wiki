#summary Macintosh source code install instructions
#sidebar Installation

These instructions apply to version 0.15 and later.

They have been tested on Snow Leopard, so there might be small changes for Leopard.

You will need Administrative privileges to run the installation.  

Note that this can take quite some time.  If you have not previously installed Xcode or !MacPorts then it could take several hours.  It will also download a large number of files, so make sure you have network access with good bandwidth and large download limits.

You might want to consider using the windows executable version under a Windows emulation environment, albeit we have not tested this approach.

<wiki:toc max_depth="4" />

= Installation =

  *  These instructions assume you have [http://code.google.com/p/biodiverse/downloads/list downloaded] and extracted the Biodiverse source code distribution into your home directory (this will be `Users/your_login_name/` and is the same as `$HOME/biodiverse`).  You then need to rename the Biodiverse folder from `biodiverse_0.15_source` to `biodiverse`.  If you prefer not to, or have extracted it elsewhere, then make sure to change the `$HOME/biodiverse/lib` text in the following for the folder path you have used (i.e. if it is in `/opt/biodiverse` then use `/opt/biodiverse/lib`, if it is still `$HOME/biodiverse_0.15_source` then use `$HOME/biodiverse_0.15_source/lib`).

  *  You must have the X11 software on your Mac. You will have this if you have Leopard or later. If you have a previous OSX you will need to obtain it either from your original CD or from the Apple site.

  *  Install the Xcode software, as it is needed to compile the !MacPorts libraries.  This requires registration with Apple.  If you do not have the installation disk (it comes with the computer when you purchase it) then you need to download it.  The download is also >2GB, of which unfortunately a large part is the iPhone SDK which we don't need.  http://developer.apple.com/technologies/xcode.html

  *  Install !MacPorts unless you already have it.  If you are not sure then try to install it anyway and it will tell you.  
    * If your operating system is Snow Leopard then use http://distfiles.macports.org/MacPorts/MacPorts-1.9.1-10.6-SnowLeopard.dmg
    * If your operating system is Leopard then use http://distfiles.macports.org/MacPorts/MacPorts-1.9.1-10.5-Leopard.dmg
    * (If needed, for example to get an installer for an older OS, the generic !MacPorts URL is http://www.macports.org ).
    * Double click on the dmg file contents to install.  The remaining instructions assume you are using the default location (`/opt`).
  *  Run this command in a terminal window to get the latest versions of the !MacPorts libraries.
{{{
sudo port -v selfupdate
}}}

  *  Now install the perl libraries needed by Biodiverse.  The following commands will require some interaction when they download additional packages, depending on your CPAN settings.  The first two commands install the perl wrappers for Glade and Gnome Canvas and will also install all the other necessary libraries on which they depend (this can take more than an hour).  The final three commands install the remaining perl libraries.  If you get errors then please see the [#Trouble_shooting trouble shooting section] (installing the URI module can require some forcing).
{{{
sudo port install p5-gtk2-gladexml
sudo port install p5-gnome2-canvas

sudo /opt/local/bin/perl -MCPAN -Mlib=$HOME/biodiverse/lib -e 'install LWP::Simple'
sudo /opt/local/bin/perl -MCPAN -Mlib=$HOME/biodiverse/lib -e 'install Bundle::BiodiverseNoGUI'
sudo /opt/local/bin/perl -MCPAN -Mlib=$HOME/biodiverse/lib -e 'install Bundle::Biodiverse'
}}}

= Running it =

  * To run Biodiverse, open a terminal window and change directory to the biodiverse/bin folder.  If it is in your home folder and called `biodiverse` then type:
{{{
cd ~/biodiverse/bin
}}}
  * Once you have done this, type the following command to open Biodiverse.
{{{
/opt/local/bin/perl BiodiverseGUI.pl
}}}
  *  Alternately, you could give the full path to both Perl and Biodiverse if you want to start in a particular directory (i.e. where all your files are).
{{{
/opt/local/bin/perl ~/biodiverse/bin/BiodiverseGUI.pl
}}}
  *  If you want your command prompt back after opening Biodiverse then run it as a background job.  However, the log output will then be mixed with any other commands you type so things can become confusing.
{{{
perl BiodiverseGUI.pl &
}}}



  The full path to perl is used to ensure the !MacPorts version is used.  You can dispense with the `/opt/local/bin` text if the !MacPorts version is the first perl in the search path. To check if it is, type:
{{{
which perl
}}}

  If it returns `/opt/local/bin/perl` then you can just type this command to run Biodiverse.
{{{
perl ~/biodiverse/bin/BiodiverseGUI.pl
}}}

  * This needs testing on a macports system, but you can also add an alias to your profile to save a bit of typing.  Edit the file `$HOME/.profile` (e.g. `Users\your_login\.profile`) and add this line to the end of the file (remembering to edit the biodiverse path if it differs from this):
{{{
alias biodiverse '/opt/local/bin/perl ~/biodiverse/bin/BiodiverseGUI.pl'
}}}
  The next time you open a terminal window you can just type this to start the system:
{{{
biodiverse
}}}
  If you are impatient and don't want to open a new window then type this after editing the file (note that you don't need to do it when you start a new terminal).
{{{
source ~/.profile
biodiverse
}}}


= Trouble shooting =

  *  If, when running the third sudo line, you get an error including the text below then check you have typed the paths correctly (the `-Mlib=$HOME...` text).  
  {{{
  <...some leader text about what cpan is doing...>
  Warning: Cannot install Bundle::Biodiverse, don't know what it is.
  Try the command
    i /Bundle::Biodiverse/
	
  to find objects with matching identifiers.
  }}}
  *  If Perl complains that it cannot locate a file when running Biodiverse then this library will need to be installed interactively usng the cpan shell `sudo /opt/local/bin/cpan`. The complaint will start with text like _Can't locate Fred/Fred.pm in @INC (@INC contains:...)_ In this case, install module Fred::Fred (substitute a double colon "::" for each forward slash "/", and remove the trailing ".pm" from the module it cannot locate).  E.g.: `sudo /opt/local/bin/perl -MCPAN -e 'install Fred::Fred'` .  This can happen if one or more of the modules listed in the bundle failed to install.
  *  If the installation of the Bundle files fails then check which module causes it.  The URI is one suspect, as it failed one test at the time 0.15 was released, causing the installation to stop.  In this case start the cpan shell in interactive mode (`sudo /opt/local/bin/cpan`) and then type `force install URI`.
  *  !MacPorts might also complain that files are out of sync, probably if you have an existing !MacPorts installation.  If this is the case then run this command to ensure all files are up to date.
{{{
sudo port -v selfupdate
}}}
  
  *  Please report any other issues using the [http://code.google.com/p/biodiverse/issues/list project issue tracker]